## **試場規則**

### **違規事項**

 - 行動裝置未置於教室外、教室前後、監考老師桌上、個人電腦主機上，經監考老師發現。
 - 於考試期間使用行動裝置。
 - 配戴具通訊功能的穿戴裝置。
 - 以任何方式使其他考生無法正常使用系統。
 - 考試期間與監考老師以外之人交談。

上述行為被發現，且屢勸不聽者，將登記於考生簽到表，並在賽後系統測試時將總成績 $\times 0.0001$ 並四捨五入至個位。

### **賽制**

 - 本次競賽採`OI`制度，有部分分，無罰時，並取每筆提交的子題聯集為總分。
   - 例如：某題共有兩筆提交，第一筆通過子測資 $\\{1,2\\}$ 、第二筆通過子測資 $\\{2,3\\}$ ，則總分為第 $\\{1,2,3\\}$ 筆子測資的分數相加。
 - 本次為封板賽，記分板將在比賽結束後公布。
 - 競賽結束後會做一次***System test***(系統測試)，所有成績以其為準。
 - 提交的冷卻時間(CD time)為 $15$ 秒，最後 $30$ 分鐘不在此限。
 - 對於每一題，使用者最多可以進行 $100$ 筆提交。

### **系統使用說明**

 - 系統連結: [http://192.168.81.242](http://192.168.81.242/)
 - 競賽將在 ***2025/08/29 1:10 P.M.*** 開始，使用者有十分鐘的時間閱讀試場規則，確認讀畢後請按下系統上的開始鈕，以免影響競賽時間。
 - 本次競賽時長共 ***300*** 分鐘。
 - 最晚進場時間 ***2025/08/29 1:40 P.M.***。
 - 最早離場時間 ***2025/08/29 2:10 P.M.***。
 - 總題本在第***A***題的題目敘述頁面中。
 - 使用者允許許使用 ***C/C++11/C++17*** 提交程式碼。
 - 若結果為***Execution timed out (wall clock limit exceeded)***，則表示系統因為某筆提交繁忙中，請檢查你的程式碼使否有可能超過執行時間，並稍後再試。
 - 對於每筆提交，請確認副檔名符合系統要求，詳見系統頁面。
 - 如有題目問題，請使用系統提供的訊息詢問功能提問。
 - 如有其他問題，如：上廁所、需要計算紙、系統使用問題等，請直接舉手向監考老師發問。

### **資源**

 - 賽後我們將會在一天內 **彰中資訊社群** 及 **HARC Discord** 中公告本次題解、總成績。
 - 競賽後將擇期在 ***HARC Discord*** 上進行直播題解。
 - 網址：
   - [彰中資訊社群](https://www.facebook.com/groups/chshcs/)
   - [本次專案](https://mysh212.github.io/CHSH-nhspc113-PRI/)
   - [HARC Discord](https://2120.page.link/HARC)
   - [彰中資訊社Discord](https://2120.page.link/cdc)


<div class = 'page' />

## **A. 方差緊密度** ***<font color = '#AAAAAA'>Variance Tightness</font>***

`time limit` 2s
`memory limit` 256MB

### ***Statement***

給你一個包含 $N$ 個非負整數的序列 $A_1, \; A_2, \; \dots, \; A_N$。你需要將這個序列分成不超過 $K$ 個連續的子序列。

對於每個子序列 $[i, \; j]$，其「方差緊密度收益」定義為：

$$R(i, j) = \left(\sum\limits_{x=i}^{j} A_x \right)^2 - (j - i + 1) \sum\limits_{x=i}^j A_x^2$$

你的目標是最大化所有子序列的總方差緊密度收益。

### ***Input***

第一行包含兩個整數 $N, K$

第二行包含 $N$ 個非負整數 $A_1, A_2, \dots, A_N$

### ***Output***

一個整數，表示最大的總方差緊密度收益。

### ***Sample Input 1***

```
3 2
1 2 3
```

### ***Sample Output 1***

```
-1
```

<div class = 'page' />


### ***Sample Input 2***

```
4 2
5 5 5 5
```

### ***Sample Output 2***

```
0
```

### ***Sample Input 3***

```
5 1
10 20 30 40 50
```

### ***Sample Output 3***

```
-5000
```

### ***Note***

- $1 \leq K \leq N \leq 2000$
- $0 \leq A_i \leq 10^4$

### ***Subtask***

 - ***subtask1***: $7\\%$ $K \leq 2$
 - ***subtask2***: $13\\%$ $1 \leq K \leq N \leq 20$
 - ***subtask3***: $23\\%$ $1 \leq K \leq N \leq 500$
 - ***subtask4***: $57\\%$ ***As statement***

<div class = 'page' />

## **B. 伴手禮** ***<font color = '#AAAAAA'> Souvenir </font>***

`time limit` 1s
`memory limit` 256MB

### ***Statement***

***ysh*** 最近出國旅遊，不小心買了太多伴手禮準備給 ***Cyana*** ......

現在 ***ysh*** 非常後悔，他不知道自己買的伴手禮是否能通過機場的檢驗標準:

 - 將所有貨物堆疊起來
 - 一層只能放一個貨物
 - 在上層的貨物之長、寬必須分別小於所有下層貨物之長、寬

也就是 **長 $15$ 公分、寬 $20$ 公分** 的貨物，可以放在 **長 $30$ 公分、寬 $50$ 公分** 的貨物上，但卻無法放在 **長 $150$ 公分、寬 $20$ 公分** 或 **長 $6$ 公分、寬 $270$ 公分** 的貨物上。

而機場老闆相當固執，對於「長」、「寬」有著相當嚴格的要求，哪邊是長邊、哪邊是短邊通通由他說了算，也就是說－－我們不可以私自旋轉貨物。

因為在購買行李時， ***ysh*** 只買了 **一疊** ，請你告訴 ***ysh*** 他最多可以帶多少行李回家。

![可愛 Baggage 迷因](img/Baggage.jpg)

<div class = 'page' />

### ***Input***

$n$
$a_1$ $b_1$
$a_2$ $b_2$
...
$a_n$ $b_n$

### ***Output***

$Ans$

### ***Sample Input 1***

```
5
1 3
2 10
9 8
2 7
3 6
```

### ***Sample Output 1***

```
3
```

### ***Sample Input 2***

```
10
1 20
17 15
2 11
3 15
3 16
14 9
14 3
16 9
4 18
6 9
```

### ***Sample Output 2***

```
3
```

<div class = 'page' />

### ***Note***

 - $0 \leq n \leq 2 \times 10 ^ 5$
 - $1 \leq a_i, b_i \leq 10 ^ 9,\ \forall\ 1 \leq i \leq n$

### ***Subtask***

 - ***subtask1***: $1\\%$ $n \leq 10,\ [\big(|\\{x|x \in < a >\\}| \leq 1\big) \vee \big(|\\{x | x \in < b >\\}| \leq 1\big)]$
 - ***subtask2***: $7\\%$ $n \leq 10$
 - ***subtask3***: $13\\%$ $a_i, b_i \leq 100,\ \forall\ 1 \leq i \leq n$
 - ***subtask4***: $37\\%$ $n \leq 2000$
 - ***subtask5***: $42\\%$ ***As statement***

<div class = 'page' />

## **C. 希格瑪** ***<font color = '#AAAAAA'> Sigma </font>***

`time limit` 1s
`memory limit` 128MB

### ***Statement***
給定 $N$，試求：
$$\left(\sum_{K=1}^{N^2}{\lfloor \sqrt{K} \rfloor} \right) \pmod{10^9 + 7}$$

### ***Input***
$N$

### ***Output***
$Ans$


### ***Sample Input***
```
3
```

### ***Sample Output***
```
16
```
$\sum_{K=1}^{3^2}{\lfloor \sqrt{K} \rfloor} = \lfloor\sqrt{1}\rfloor + \lfloor\sqrt{2}\rfloor + \ldots + \lfloor\sqrt{9}\rfloor = 16$

### ***Note***
* $1 \leq N \leq 10^{18}$
* $10^9 + 7$ 是質數
* 所有輸入輸出皆為整數


### ***Subtask***
- ***subtask1***: $8\\%$ $N \leq 10^3$
- ***subtask2***: $23\\%$ $N \leq 10^6$
- ***subtask3***: $69\\%$ ***As statement***

<div class = 'page' />

## **D. 切糕** ***<font color = '#AAAAAA'> Qiegao </font>***

`time limit` 1s
`memory limit` 256MB

### ***Statement***
隨著 LLM 的蓬勃發展，資深碼農 **MelonWalker** 輕易地被取代了。他決定轉型餐飲業，開始販售切糕。

他的切糕與傳統切糕不同，是一種長條形的蛋糕。由於每單位長使用的材料不同，其價格也各異。**MelonWalker** 是一位有良心的老闆，他的切糕價格是以「切下長度 $K$ 單位長，乘以該區間中位數」來計價。由於他的店家支援行動支付，所以價格可以是小數。

路過的 **hamster** 想買長度為 $K$ 的切糕，請問他至少需要支付多少錢？

具體來說，給定一個長度為 $N$ 的價格序列，你需要找到一個長度為 $K$ 的連續區間，使得該區間的中位數乘以 $K$ 的結果最小。

![videoframe_32669](https://hackmd.io/_uploads/rkNQK538eg.png)
(圖源：Youtube 呼吸菌QAQ - 小八買切糕)

### ***Input***
$N\ K$
$x_1\ x_2\ \ldots\ x_N$

輸入的第一行包含兩個整數 $N$ 和 $K$，分別代表總切糕長度與切割的長度。
第二行有 $N$ 個整數，代表該部分切糕的價格。

### ***Output***
$Ans$

輸出結果與答案誤差最大可到 $10^{-6}$

<div class = 'page' />

### ***Sample Input***
```
5 2
3 1 5 2 6
```
選擇區間 $[1, 2]$，其中位數為 $\frac{1 + 3}{2}=2$。因此，需要支付 $2 \times 2 = 4$。可以證明沒有更便宜的切法。

### ***Sample Output***
```
4.0000000000
```


### ***Note***
* $1 \leq K \leq N \leq 2\times10^5$
* $1 \leq x \leq 10^9$
* 所有輸入皆為整數

### ***Subtask***
- ***subtask1***: $3\\%$ $N = K$
- ***subtask2***: $17\\%$ $1 \leq N \leq 100$
- ***subtask3***: $40 \\%$ $K$ 是奇數
- ***subtask4***: $40 \\%$ ***As statement***

<div class = 'page' />

## **E. 質數背包** ***<font color = '#AAAAAA'> Prime Knapsack </font>***

`time limit` 1s
`memory limit` 256MB

### ***Statement***

給定一個正整數 $N$，求能將其表示為質數和的最少質數個數。

若 $N$ 無法表示為任意質數的和，請輸出 "I got one million dollars."。

### ***Input***

$N$

### ***Output***

$Ans$

<div class = 'page' />

### ***Sample Input 1***

```
4
```

### ***Sample Output 1***

```
2
```

由於 2 + 2 = 4，所以最少只要 2 個質數。

### ***Sample Input 2***

```
3
```

### ***Sample Output 2***

```
1
```
由於 3 本身是質數，故只要一個就能湊出。

### ***Note***

* $2 \le N \le 10^{18}$


### ***Subtask***

- ***subtask1***: $90\\%$ $N \leq 1000$
- ***subtask2***: $9\\%$ $N \leq 10^{12}$
- ***subtask3***: $1\\%$ ***As statement***

<div class = 'page' />

## **F. 最佳訊號路徑** ***<font color = '#AAAAAA'> Optimal Signal Path </font>***

`time limit` 2s
`memory limit` 256MB

### ***Statement***
身為一個現代人，**MelonWalker** 深知「訊號就是生命」的道理！偏偏他使用的電信公司訊號很不給力，所以他出門在外，總是要想辦法走在基地台附近。然而，**MelonWalker** 是個十足的路痴，出門完全依賴 $\texttt{Google Maps}$。糟糕的是，它居然沒有「最佳訊號路徑」這種高科技功能，所以你的任務就是替他找到一條路徑，讓他在整段旅程中，距離基地台最遠的那個點離基地台的距離，是所有路徑裡面最短的，這才能讓他安心地滑手機。

現在給你一張包含 $N$ 個點、$M$ 條邊的無向帶權圖，點的編號從 $1$ 到 $N$。每條邊由 $u, v, w$ 表示，代表點 $u$ 和點 $v$ 之間的距離是 $w$。

並且已知 $K$ 個**基地台**的位置 $x_1, x_2, \ldots, x_K$。

接下來，**MelonWalker** 會問你 $Q$ 個問題，每個問題會給定他現在的起點 $s$ 和目的地 $t$。你需要幫他找出從 $s$ 到 $t$ 的最佳訊號路徑，並輸出這條路徑上離基地台最遠的點與基地台的距離。最佳訊號路徑代表這條路徑上的所有點，它們距離最近的基地台的距離中的最大值是所有可能路徑中最小的。

![Image](https://hackmd.io/_uploads/rkyBtG-wee.jpg)

<div class = 'page' />

### ***Input***
$N\ M$
$u_1\ v_1\ w_1$
$u_2\ v_2\ w_2$
$\vdots$
$u_M\ v_M\ w_M$
$K$
$x_1\ x_2\ \ldots\ x_K$
$Q$
$s_1\ t_1$
$s_2\ t_2$
$\vdots$
$s_Q\ t_Q$

輸入的第一行包含兩個整數 $N$ 和 $M$，分別代表圖中的總節點數和邊數。
接下來的 $M$ 行，每行包含三個整數 $u, v, w$，表示點 $u$ 和 $v$ 的距離為 $w$。
再接下來的一行包含一個整數 $K$，代表基地台的數量。
再接下來的一行包含 $K$ 個整數 $x_1, x_2, \ldots, x_K$，表示 $K$ 個基地台的節點編號。
最後一行包含一個整數 $Q$，代表詢問的總筆數。
接下來的 $Q$ 行，每行包含兩個整數 $s, t$，表示一筆詢問的起點和終點。

### ***Output***
$Ans_1$
$Ans_2$
$\vdots$
$Ans_Q$

$Ans_k$ 代表第 $k$ 筆詢問的答案

<div class = 'page' />


### ***Sample Input***
```
6 8
1 3 3
1 5 5
1 6 1
2 5 2
2 6 4
3 4 3
3 5 1
5 6 1
2
3 5
4
1 2
4 2
5 5
2 3
```

### ***Sample Output***
```
2
3
0
2
```
對於第一筆詢問，從 $1$ 到 $2$ 的路徑，考慮 $1 \to 3 \to 5 \to 2$：
-   點 $1$ 距離最近基地台的距離是 $2$ (到基地台 $5$)。
-   點 $3$ 本身就是基地台，距離為 $0$。
-   點 $5$ 本身就是基地台，距離為 $0$。
-   點 $2$ 距離最近基地台的距離是 $2$ (到基地台 $5$)。
這條路徑上的點 $(1, 3, 5, 2)$ 距離最近基地台的距離分別是 $(2, 0, 0, 2)$。
這些距離中的最大值是 $2$。經證明，沒有其他路徑能得到更小的最大距離。

<div class = 'page' />

### ***Note***
* $1 \leq N, Q \leq 2\times10^5$
* $N - 1 \leq M \leq \min(\frac{N \times (N-1)}{2}, 2\times 10^5)$
* $1 \leq K, x, u, v, s, t \leq N$
* $1 \leq w \leq 10^9$
* 任兩點至少有一條路徑可到達
* 保證圖無自環和重邊
* 所有輸入輸出皆為整數


### ***Subtask***
- ***subtask1***: $6\\%$ $K = 1 \texttt{ and } \forall i \in \\{1, 2, \ldots, Q\\},\ s_i = t_i$
- ***subtask2***: $11\\%$ $\forall i \in \\{1, 2, \ldots, Q\\},\ s_i = t_i$
- ***subtask3***: $22\\%$ $N \leq 100 \texttt{ and } Q \leq 100$
- ***subtask4***: $25 \\%$ $\texttt{給定的圖是一棵樹}$
- ***subtask5***: $36 \\%$ ***As statement***

<div class = 'page' />

## **G. 神秘交叉** ***<font color = '#AAAAAA'> Intersect </font>***

`time limit` 2s
`memory limit` 256MB

### ***Statement***

給定一個長度為 $n$ 的數列 $< a >$ ，試求 $\displaystyle\max(\big\\{f(l, r)\big|1 \leq l \leq r \leq n \wedge l, r \in \mathbb{N}\big\\})$, 其中 $f(l, r) \equiv a_l \oplus a_{l + 1} \oplus ... \oplus a_{r - 1} \oplus a_r$

![Cargo 迷因](img/Cargo.jpg)

<div class = 'page' />

### ***Input***

$n$
$a_1$ $a_2$ ... $a_n$

### ***Output***

$Ans$

### ***Sample Input 1***

```
3
4 1 9
```

### ***Sample Output 1***

```
12
```

### ***Sample Input 2***

```
7
412401279450576652 580784719358114359 357424042474072598 638120460316099882 402905540305957455 557218558427174880 762984001351336261
```

### ***Sample Output 2***

```
1009394896808872595
```

### ***Note***

 - $1 \leq n \leq 10 ^ 5$
 - $1 \leq a_i \leq 10 ^ {18},\ \forall\ 1 \leq i \leq n$

### ***Subtask***

 - ***subtask1***: $37\\%$ $n \leq 1000$
 - ***subtask2***: $63\\%$ ***As statement***

<div class = 'page' />

## **H. ARC 人類表現估計** ***<font color = '#AAAAAA'> H-ARC </font>***

`time limit` 1s
`memory limit` 256MB

### ***Statement***
**張詩大**最近在研究「抽象與推理語料庫基準中人類表現的穩健估計」(A Robust Estimate of Human Performance on the Abstraction and Reasoning Corpus Benchmark)，簡稱為 H-ARC，以下是他的論文摘要：

抽象與推理語料庫 (ARC) 是一個視覺程式合成的基準測試，旨在測試人類和機器在具有挑戰性的分佈外泛化能力。自 2019 年以來，現有的人工智慧方法在此挑戰上進展有限。比較人類和機器的表現對於基準測試的有效性很重要。雖然先前的工作探索了人類解決 ARC 基準測試任務的能力，但他們要麼只使用原始數據集中的一部分任務，要麼使用 ARC 的變體，因此只提供了人類表現的初步估計。在這項工作中，我們透過評估 1729 名人類在原始 ARC 問題集中全部 400 個訓練任務和 400 個評估任務上的表現，獲得了對人類表現更穩健的估計。我們估計人類在訓練集上的平均正確率介於 73.3% 到 77.2% 之間，報告的實證平均為 76.2%；在公開評估集上的平均正確率介於 55.9% 到 68.9% 之間，報告的實證平均為 64.2%。然而，我們也發現 800 個任務中有 790 個任務至少有一個人能在三次嘗試內解決，這表明絕大多數公開可用的 ARC 任務原則上都能被典型的網路眾包工作者解決。值得注意的是，雖然這些數字略低於早期的估計，但人類的表現仍然大大超過了目前解決 ARC 的最先進方法。為了促進 ARC 的研究，我們公開發布了我們的數據集，稱為 H-ARC (human-ARC)，其中包含所有人類參與者的提交內容和操作軌跡。

這篇論文對學術界有以下重要貢獻：
* 提供更穩健的人類表現估計：過去對 ARC (Abstraction and Reasoning Corpus) 基準測試中人類表現的評估不夠全面。這篇論文透過大規模評估，來提供了更穩健且全面的數據，證明了人類在 ARC 任務上的表現遠超目前的頂尖人工智慧模型，這對於基準測試的有效性至關重要。
* 揭示人機智能差距：研究結果清楚地突顯了人類智能在原則上能夠執行解決幾乎所有 ARC 任務所需的計算，這與目前任何已報告的 AI 模型都不同。這為 AI 系統設定了一個具有挑戰性的目標，並指出當前 AI 方法與人類在抽象推理和泛化能力上的顯著差距。
* 分析人類錯誤模式：論文對人類在 ARC 任務中錯誤的類型和模式進行了初步分析，並與機器錯誤進行了比較。結果表明人機犯錯的本質不同，這進一步強調了現有 AI 方法尚未捕捉到人類解決 ARC 問題的核心方式，為未來 AI 模型改進提供了方向。

不過他目前還缺少了部分人類表現的資料，於是他邀請了彰中的學生當受試者，並且實驗內容如下：
* 給定 3 張不同的圖片作為輸入-輸出範例
* 根據這 3 個範例，推斷出其中一種轉換方式
* 給你第 4 張測試圖片，試問其輸出結果如何

<div class = 'page' />

目前已知共有三種轉換方式，如下圖所示：

![image](https://hackmd.io/_uploads/BkNFHlA8ee.png)
(arXiv: 2409.01374 [cs.AI])

<div class = 'page' />

不過張詩大為了照顧色盲，於是讓顏色只有 5 種，且每種顏色用數字 0、1、2、3、4 表示。並且考量不同大小的圖片，整理資料用起來很麻煩，所以將圖片大小固定為 $4 \times 4$。
故上面三種轉換方式，變成如下述表示：

第一種：
給定 $4 \times 4$ 的矩陣，每個元素只有 0 或 1
```
1001      0110
0110      1001
0110  ->  1001
1001      0110
```
（規則：將所有 0 替換為 1，所有 1 替換為 0，即顏色反轉）

第二種：
給定 $4 \times 4$ 的矩陣，每個元素為 0 ~ 4
四個角落非為 0，其他必為 0
```
1004      0000
0000      0140
0000  ->  0230
2003      0000
```
（規則：將四個角落的非零元素移動到中心 $2 \times 2$ 區域的對應位置，其他元素變為 0）

第三種：
給定 $4 \times 4$ 的矩陣，每個元素為 0 ~ 4
```
0004      4000
1210      1100
0320  ->  0200
2013      3100
```
（規則：從中間對折 (折線為垂直方向)，用右邊的顏色 (除了 0) 把左邊的顏色蓋掉，之後右半邊全變成 0。）

**Mingyee** 很榮幸的受邀當他的受試者，但實際上他只想蹭獎勵金，不過亂猜會被發現而領不到錢，所以他想寫一個程式來快速且精準地通過實驗。**Mingyee** 必須根據給定的三個輸入-輸出範例，推斷出其中一種轉換方式，然後將其應用於第四張測試圖片以得出其輸出結果。

<div class = 'page' />

### ***Input***
$c_{1, 1}\ c_{1, 2}\ c_{1, 3}\ c_{1, 4}$
$c_{2, 1}\ c_{2, 2}\ c_{2, 3}\ c_{2, 4}$
$c_{3, 1}\ c_{3, 2}\ c_{3, 3}\ c_{3, 4}$
$c_{4, 1}\ c_{4, 2}\ c_{4, 3}\ c_{4, 4}$

此為一張圖片的輸入格式。
共給七張圖片，每張圖片隔一行，前面每兩張代表一組輸入輸出結果，最後一張為測試圖片。

### ***Output***
$Ans$

輸出測試圖片其轉換後的結果。

<div class = 'page' />

### ***Sample Input***
```
1101
1011
0001
0010

0010
0100
1110
1101

0000
1001
0010
0100

1111
0110
1101
1011

1010
1110
1011
1111

0101
0001
0100
0000

0110
1111
1010
1010
```

### ***Sample Output***
```
1001
0000
0101
0101
```

<div class = 'page' />


### ***Note***
* $c_{i,j} \in \\{0,1,2,3,4\\}$

### ***Task***
- ***task***: $100 \\%$ ***As statement***

<div class = 'page' />

## **I. 家俱製造商** ***<font color = '#AAAAAA'> Furniture </font>***

`time limit` 1s
`memory limit` 256MB

### ***Statement***

作為知名家俱製造商 － ***HARC*** － 的廠長， ***Willy*** 總是需要煩惱如何才能最有效率地處理源源不絕的訂單......

而製造家俱的步驟極其繁複，需要 **設計、宣傳、砍柴、脫樹皮、削平、打蠟、組裝** 等。

這些步驟看似繁複，但其實有些可以同時進行，像是 **設計** 和 **宣傳** 、 **宣傳** 和 **砍柴** 等等。

但像是 **砍柴** $\rightarrow$ **脫樹皮** $\rightarrow$ **削平** $\rightarrow$ **打蠟** $\rightarrow$ **組裝** 這類相依的步驟，則成為了困擾 ***Willy*** 多年的難題。

幸好 ***Willy*** 在處理源源不絕訂單的同時，也有源源不絕的人力。

現在有 $n$ 項工作，編號為 $[1, n]$ ，其中共有 $m$ 組相依關係，分別是 **在完成 工作 $b_j$ 後，才能進行 工作 $c_j$ ，其中 $1 \leq j \leq m$**。

而完成 **工作 $i$** 所需的時間為 $t_i,\ 1 \leq i \leq n$。

現在 ***Willy*** 需要請你幫忙找出 **開始每項工作可能的最早時間點** 。 請你好好寫程式幫助他吧 ouob

<!-- ![圖片](https://hackmd.io/_uploads/BJNlPPKtll.png) -->
<img src = 'https://hackmd.io/_uploads/BJNlPPKtll.png' height = 500px />

<div class = 'page' />


### ***Input***

$n$ $m$
$b_1$ $c_1$
$b_2$ $c_2$
...
$b_m$ $c_m$
$t_1$ $t_2$ ... $t_n$

### ***Output***

$Ans_1$ $Ans_2$ ... $Ans_n$

其中 $Ans_i,\ 1 \leq i \leq n$ 為 **開始工作 $i$ 可能的最早時間點** ，而所有工作都需要在時間點 $0$ 後執行

### ***Sample Input***

```
5 4
1 2
2 3
4 5
4 3
1 1 1 1 1
```

### ***Sample Output***

```
0 1 2 0 1
```

輸入中描述了 $1 \rightarrow 2 \rightarrow 3$ 、 $4 \rightarrow 5$ 的關係，而因為工作可以平行進行，於是讓 **工作 $1, 4$** 在 **時間點 $0$** 開始執行，而因為每項工作所需時間皆為 $1$ ，故答案為 `0 1 2 0 1` 。

<div class = 'page' />

### ***Note***

 - $0 \leq n \leq 2 \times 10 ^ 5$
 - $\displaystyle 0 \leq m \leq min\big(\sum_{k=1}^{n - 1} k, 10 ^ 6 \big)$
 - $1 \leq b_i, c_i \leq n,\ \forall\ 1 \leq i \leq m$
 - $0 \leq t_i \leq 10 ^ 9,\ \forall\ 1 \leq i \leq n$
 - 輸入保證合理，不會有工作不可能開始。

### ***Subtask***

 - ***subtask1***: $2\\%$ $n \leq 10,\ m \leq 10$
 - ***subtask2***: $7\\%$ $n \leq 100,\ m \leq 10^3$
 - ***subtask3***: $6\\%$ $t_i = 1,\ \forall 1 \leq i \leq n$
 - ***subtask4***: $15\\%$ $n \leq 10^3,\ m \leq 10^4$
 - ***subtask5***: $12\\%$ $m \leq 100$
 - ***subtask6***: $21\\%$ $m \leq (2 \times 10 ^ 5) - 1$
 - ***subtask7***: $37\\%$ ***As statement***

<div class = 'page' />

## **J. 香蕉衝突** ***<font color = '#AAAAAA'> Banana Wars </font>***

`time limit` 2s
`memory limit` 256MB

### ***Statement***
在神秘的亞馬遜雨林深處，存在著一座形狀特殊的凸多邊形區域，這裡是飛天猴族的領地。這些猴子居住在凸多邊形上，並且對一種傳說中的稀世珍寶「黃金香蕉」，懷有難以抗拒的執念。

當黃金香蕉出現在雨林中的任意位置時，所有猴子會瞬間從自己的據點出發，沿著直線飛行路線全速衝向目標，並在另一個據點停下。然而，這些飛行路線在空中交錯縱橫，形成一張隱形的危險網絡。每當兩條飛行路線相交時，猴群就會在交點爆發激烈的空中衝突，爭奪優先通過權，這種現象被當地土著稱為「香蕉衝突」。

作為雨林和平協會的首席觀測員，你的任務是計算這些飛行路線的交點數量，以評估是否需要派出訓練有素的「飛天倉鼠」來維持秩序。

現在，給定猴子的據點（位於凸多邊形邊或頂點上）與他們規劃的飛行路線（兩點間的直線段），請你計算總共有多少對路線在空中發生了相交，也就是香蕉衝突的次數。

<!-- ![Banana_duct_taped_to_fridge_as_a_reminder_to_eat_less_meat](https://hackmd.io/_uploads/Hk4EcGWvgg.jpg) -->

<img src = 'https://hackmd.io/_uploads/Hk4EcGWvgg.jpg' alt = 'Banana_duct_taped_to_fridge_as_a_reminder_to_eat_less_meat' height = 500px />

(圖源：喜劇演員 (藝術品) - wiki)

<div class = 'page' />

### ***Input***

$n$
$x_1\ y_1$
$x_2\ y_2$
$\vdots$
$x_n\ y_n$
$m$
$S_{x_1}\ S_{y_1}\ P_{x_1}\ P_{y_1}$
$S_{x_2}\ S_{y_2}\ P_{x_2}\ P_{y_2}$
$\vdots$
$S_{x_m}\ S_{y_m}\ P_{x_m}\ P_{y_m}$

第一行包含一個整數 $n$，代表猴子的據點數。

接下來的 $n$ 行，每行包含兩個整數 $x_i$ 和 $y_i$，表示猴子據點的座標。這些點依逆時針順序給出。

接下來的一行包含一個整數 $m$，表示猴子們的飛行路線數量。

接下來的 $m$ 行，每行包含四個整數 $S_{x_i}\ S_{y_i}\ P_{x_i}\ P_{y_i}$，表示一條隱形路線的兩個端點 $(S_{x_i}, S_{y_i})$ 跟 $(P_{x_i}, P_{y_i})$，端點必在據點上。

### ***Output***

$Ans$

輸出一行整數 $Ans$ 代表香蕉衝突的次數。

<div class = 'page' />


### ***Sample Input 1***
```
5
1 1
0 0
1 -1
2 -1
3 3
3
1 1 1 -1
2 -1 3 3
0 0 3 3
```

### ***Sample Output 1***
```
2
```

### ***Sample Input 2***
```
8
3 3
2 3
1 3
1 2
1 1
2 1
3 1
3 2
4
1 3 3 1
1 2 3 2
1 1 3 3
2 1 2 3
```

### ***Sample Output 2***
```
6
```

<div class = 'page' />


### ***Note***
* $3 \leq n \leq 10^5$
* $1 \leq m \leq min(\frac{n \times (n-1)}{2}, 10^5)$
* $-10^9 \leq x_i,\ y_i \leq -10^9$
* $(S_{x_i},\ S_{y_i}),\ (P_{x_i},\ P_{y_i}) \in \\{(x_i,\ y_i)\ |\ 1 \leq i \leq n\\}$
* 保證路線不重疊
* 交點位於據點的需列入計算 (參考範例一)
* 可能有多線共點，請分別計算每組線段 (參考範例二)
* 所有輸入輸出皆為整數


### ***Subtask***

- ***subtask1***: $1\\%$ $\ \ m = 1$
- ***subtask2***: $20\\%$ $m \leq 1000$
- ***subtask3***: $31\\%$ 所有頂點皆在兩平行的垂直線上，且線段兩端點必在不同垂直線
- ***subtask4***: $48\\%$ ***As statement***